# 객체 분해

## 배경
큰 복잡한 문제를 해결하기 위해 문제의 크기를 작은 단위로 `분해`하고 큰 그룹으로 `추상화` 하는 작업이 필요하다.
왜냐? 큰 문제를 한번에 처리하기엔 사람이 한번에 알아야할 내용이 많아져서 힘들다.. 많은 것을 기억하기 힘들지...
따라서 큰 문제를 작은 단위로 나누고 불필요한 정보를 제거한 핵심을 추상화한 형태로 만든 후 해결을 위한 방법을 생각하여야한다.
> 추상화와 분해는 소프트웨어의 개발 영역이다.
> 프로그래밍 패러다임은 적절한 추상화의 윤곽을 따라 시스템을 어떤 식으로 나눌 것인지를 결정하는 원칙과 방법의 집합이다.

## 프로시저 추상화와 데이터 추상화
추상화 메커니즘안에 프로시저 추상화와 데이터 추상화가 있다.
프로시저 추상화는 소프트웨어가 무엇을 해야하는지 추상화하는것이고
데이터 추상화는 소프트웨어가 무엇을 알아야 하는지 추상화하는것이다.

- 객체지향 패러다임에서 추상화와 분해
객체지향 패러다임: `역할과 책임을 수행하는 자율적인 객체들의 협력 공동체를 구축하는것`
`역할과 책임을 수행하는 객체`의 의미는 추상화
`객체들간의 협력관계를 생성`의 의미는 분해

## 프로시저 추상화와 기능 분해
프로시저 추상화라는 의미는 소프트웨어의 커다란 기능을 하나 또는 작은 단위로 추상화한다라는 의미이며, 기능 분해는 커다란 기능을 수행하기 위해 작은 단위의 기능으로 나누는 과정을 의마한다.

### 하향식 접근방법
이러한 작업을 위한 방법중 하나로 `하향식 접근법`이 있다.
`하향식 접근법`은 최상위 문제를 정의하고 그 아래 좀 더 작은 단계의 하위 기능으로 분해하는 기법이다.
`하향식 접근법`은 작은 프로그램과 개별 알고리즘을 대상으로하거나, 이미 해결된 알고리즘을 문서화하고 서술하는데 유용한 패더다임이지만 큰 규모의 소프트웨어를 설계하는데 적합하지않다.
왜냐? 
하나의 메인함수(큰기능)로 부터 그 보다 작은 기능을 계속 호출해가는 방식으로 개발이 진행된다.
- 함수의 호출 순서가 설계 시점부터 고정된다. -> 기능의 재사용성이 어려워진다. 
- 메인함수에 모든 기능이 집중된다 -> 메인함수의 변경이 하위 기능에 side effect를 발생시킨다.

### 정보은닉과 모듈
소프트웨어의 변경에 맞춰 시스템을 분해하는 방법은 `모듈` 단위로 나누는 것이다.
모듈은 `복잡성`, `변경 가능성`을 갖는 부분을 감춰야 하며, 모듈을 나누는 기준은 `정보은닉`의 개념을 따른다.
`정보은닉`은 외부에 감춰야 하는 비밀에 따라 시스템을 분할하는 모듈 분할 원리로 변경될 가능성이 있는 비밀을 내부로 감추고, 변경 가능성이 없는 부분을 퍼블릭 인터페이스로 외부에 제공하도록한다.

`모듈`은 변경에 대한 side effect를 모듈 내로 한정시키고, 비지니스 로직과 사용자 인터페이스에 대한 관심사를 분리 시켜주지만, 인스턴스 개념이 없기 때문에 높은 추상화를 제공하지 못한다.
왜냐? 모듈은 데이터를 중심으로 기능을 나눈것이기 때문에 모듈은 다향성과 같은 추상화를 사용할 수 없다. 예를 들면 전체직원이라는 모듈은 어떤 그룹 직원이라는 형태로 추상화를 할 수 가 없다.

### 데이터 추상화와 추상 데이터 타입
`추상 데이터 타입`라는것의 의미는 프로그래밍 언어에서 제공하는 기본 타입(int, string)과 같이 사용할수 있는 타입을 개발자가 만들수 있게 하는 개념으로 예를 들어 사람이라는 타입은 나이, 이름의 데이터 타입을 함께 같은 타입이라고 할 수 있다.
추상 데이터 타입은 객체를 생성하는것이 가능하지만 데이터와 기능을 분리하여 바라보고 있다.
왜냐? 모르겠넹 ... 그냥 정의라서 그런가?

### 클래스
클래스는 추상 데이터 타입과 개념적인 의미는 비슷하지만 추가적으로 상속과 다형성을 지원한다.
추상 데이터 타입은 오퍼레이션을 기준으로 타입을 통합하는 데이터 추상화 기법이고,
객체지향에서 클래스는 타입을 기준으로 오퍼레이션을 묶는다.

> 객체`지향` 프로그래밍: 상속과 다형성을 지원하는 클래스를 기반
> 객체`기반` 프로그래밍: 상속과 다형성을 지원하지 않는 추상 데이터 타입 기반

예를들어 추상 데이터 타입에서는 직원의 급여 계산 이라는 오퍼레이션을 수행하였을때 객체 내부에서 정규직, 비정규직을 나눠 계산한 결과를 반환하며, 클라이언트는 둘의 구분을 알지 못한다.
클래스는 정규직, 비정규식이라는 두개의 객체가 별도로 존재하여 급겨 계산이라는 오퍼레이션을 수행한다.

추상화와 분해의 관점에서 추상 데이터 타입과 클래스의 차이점
- 추상 데이터 타입은 오퍼레이션을 기준으로 타입들을 추상화
- 클래스는 타입을 기준으로 절차들을 추상화

여기서 클래스를 절차들을 추상화 했다라고 말한 이유는 다형성의 개념에 따른것이다.
클라이언트 입장에서 정규직과 비정규의 구분없이 급여 개산이라는 메시지만 알고 있다. 이 때 각 구현에 대한 내용은 각 객체들이 알고 있으며, 정규직과 비정규직은 직원이라는 같은 타입을 구현한 객체들이기 때문에 
클라이언트는 둘의 구분없이 메시지를 보낼수 있는것이다.

## tip
- 새로운 타입이 추가될 가능성이 많다면 클래스 구조가 유용하다.
- 새로운 오퍼레이션이 비번하게 추가해야된다면 추상 데이터 타입이 유용

## 결국엔 협력이 중요하다.
타입 계층과 다형성은 협력이라는 문맥 안에서 책임을 수행하는 방법에 관해 고민한 결과물이여한다. 무조건적인 추상화와 분해는 지양해야된다.
결국엔 협력 관계와 책임주도 설계의 흐름이 중요하다.
1. 객체가 참여할 협력을 결정
2. 협력에 필요한 책임을 수행하기 위해 어떤 객체가 필요한지에 관해 고민
3. 다양한 방식으로 수행해야 할 때만 타입 계층 안에 각 절차를 추상화